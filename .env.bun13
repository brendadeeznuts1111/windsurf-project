# Bun 1.3 Performance Optimizations for Odds Protocol

# Core Bun 1.3 Options
BUN_OPTIONS="--watch --hot --bun"
BUN_INSPECT_PRELOAD="./scripts/preload.ts"

# Database Configuration
DATABASE_URL="postgres://localhost/odds_protocol"
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
POSTGRES_DATABASE=odds_protocol

# Redis Configuration
REDIS_URL="redis://localhost:6379"

# Development Optimizations
BUN_TEST_RUNS=1000
BUN_BACKPRESSURE_LIMIT=524288
BUN_WS_COMPRESSION=true
NODE_ENV=development

# WebSocket Configuration
WS_PORT=3000
WORKER_COUNT=4
MAX_WS_CONNECTIONS=10000
ENABLE_BACKPRESSURE=true
COMPRESSION_THRESHOLD=512

# Performance Monitoring
ENABLE_PERFORMANCE_MONITORING=true
MEMORY_MONITORING_INTERVAL=30000
METRICS_RETENTION_HOURS=24

# Bun 1.3 Specific Flags
BUN_BE_BUN=0
BUN_USER_AGENT="OddsProtocol/1.3.0"
BUN_SQL_PRECONNECT=true

# Worker Optimization
WORKER_SMOL=true
WORKER_TIMEOUT=30000
WORKER_MAX_BUFFER=10485760

# Memory Management
GC_TRIGGER_THRESHOLD=100
HEAP_ANALYSIS_INTERVAL=60000
MEMORY_LIMIT=2147483648

# Logging
LOG_LEVEL=info
STRUCTURED_LOGGING=true
LOG_PERFORMANCE_METRICS=true

# Security
CORS_ORIGIN=http://localhost:3000
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=60000

# Feature Flags
ENABLE_RAPIDHASH=true
ENABLE_JIT_OPTIMIZATION=true
ENABLE_MEMORY_PROFILING=true
ENABLE_WEBSOCKET_COMPRESSION=true
ENABLE_WORKER_POOL=true

# Production Overrides (uncomment for production)
# NODE_ENV=production
# BUN_OPTIONS="--bun"
# LOG_LEVEL=warn
# ENABLE_PERFORMANCE_MONITORING=false
# DEBUG=false
